# Load env variables from .env file
include .env
export $(shell sed 's/=.*//' .env)

CONNECTOR_TEMPLATE = connectors/connector.json.template
CONNECTOR_FILE = connectors/connector.json

.PHONY: build up connector

# Generate connector.json by replacing env variables
connector:
	@echo "Generating connector.json from template..."
	@envsubst < $(CONNECTOR_TEMPLATE) > $(CONNECTOR_FILE)

# Run docker compose with connector
up: connector
	docker compose up -d

# Clean generated file
clean:
	rm -f $(CONNECTOR_FILE)